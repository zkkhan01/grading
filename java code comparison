import os

def read_file_strip(filepath):
    with open(filepath, 'r') as f:
        # Read and strip whitespace for loose comparison
        return ''.join(f.read().split())

def grade_by_source_comparison(solution_file, submissions_folder):
    solution_src = read_file_strip(solution_file)

    grades = {}
    for filename in os.listdir(submissions_folder):
        if filename.endswith(".java"):
            student_file = os.path.join(submissions_folder, filename)
            student_src = read_file_strip(student_file)

            if student_src == solution_src:
                grades[filename] = 100
            else:
                grades[filename] = 50  # Partial credit for differences
                print(f"Source code mismatch in {filename}")

    return grades

if __name__ == '__main__':
    solution_file = input("Enter the solution .java file path: ").strip()
    submissions_folder = input("Enter the folder path where student .java files are: ").strip()

    final_grades = grade_by_source_comparison(solution_file, submissions_folder)

    print("\nFinal grades:")
    for submission, grade in final_grades.items():
        print(f"{submission}: Grade = {grade}")
